---
import { render, type CollectionEntry } from "astro:content";
import type { ProjectCategory } from "../content.config";

interface Props {
  project: CollectionEntry<"projects">;
  category: ProjectCategory;
}

const { project, category } = Astro.props;
const { Content } = await render(project);

// Site link label varies by type
const siteLinkLabel = category === "Templates" ? "Demo" : "Visit";
---

<div class="flex flex-col gap-2">
  <div class="flex justify-between gap-2">
    <div class="flex items-center gap-2">
      <h3>
        {project.data.displayName}
      </h3>
      {
        project.data.status && (
          <span class="status-badge cursor-default rounded px-2 py-0.5 text-xs tracking-wide uppercase">
            {project.data.status}
          </span>
        )
      }
    </div>
    <div class="flex gap-2">
      <a href={project.data.github} class="token-link">GitHub</a>
      {
        project.data.npm && (
          <a href={project.data.npm} class="token-link">
            npm
          </a>
        )
      }
      {
        project.data.site && (
          <a href={project.data.site} class="token-link">
            {siteLinkLabel}
          </a>
        )
      }
    </div>
  </div>
  <Content />
  <p class="text-slate-500">by {project.data.owner}</p>
</div>

<style>
  .status-badge {
    color: white;
    text-shadow:
      -1px -0.5px 0 cyan,
      1px 0.5px 0 magenta;
    box-shadow:
      -1px -0.5px 0 0 rgba(0, 255, 255, 0.5),
      1px 0.5px 0 0 rgba(255, 0, 255, 0.5),
      0 -1px 0 0 rgba(255, 255, 0, 0.4);
    transition: all 0.2s ease-out;
  }

  .status-badge:hover {
    color: rgb(148 163 184); /* slate-400 */
    text-shadow: none;
    box-shadow: inset 0 0 0 1px rgb(226 232 240); /* slate-200 */
  }
</style>
